/*!
* jQuery Popup Overlay
*
* @version 1.7.3
* @requires jQuery v1.7.1+
* @link http://vast-engineering.github.com/jquery-popup-overlay/
*/!function(t){var e,o,i=t(window),n={},a=[],s=[],p=null,l=[],d=null,r=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),c={_init:function(e){var o=t(e),i=o.data("popupoptions");s[e.id]=!1,a[e.id]=0,o.data("popup-initialized")||(o.attr("data-popup-initialized","true"),c._initonce(e)),i.autoopen&&setTimeout(function(){c.show(e,0)},0)},_initonce:function(o){var i,n,a,s,l=t(o),u=t("body"),f=l.data("popupoptions");if(p=parseInt(u.css("margin-right"),10),d=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,"tooltip"==f.type&&(f.background=!1,f.scrolllock=!1),f.backgroundactive&&(f.background=!1,f.blur=!1,f.scrolllock=!1),f.scrolllock&&void 0===e&&(s=(a=t('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),e=s.innerWidth()-s.height(99).innerWidth(),a.remove()),l.attr("id")||l.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),l.addClass("popup_content"),u.prepend(o),l.wrap('<div id="'+o.id+'_wrapper" class="popup_wrapper" />'),(i=t("#"+o.id+"_wrapper")).css({opacity:0,visibility:"hidden",position:"absolute"}),r&&i.css("cursor","pointer"),"overlay"==f.type&&i.css("overflow","auto"),l.css({opacity:0,visibility:"hidden",display:"inline-block"}),f.setzindex&&!f.autozindex&&i.css("z-index","100001"),f.outline||l.css("outline","none"),f.transition&&(l.css("transition",f.transition),i.css("transition",f.transition)),l.attr("aria-hidden",!0),f.background&&!t("#"+o.id+"_background").length){u.prepend('<div id="'+o.id+'_background" class="popup_background"></div>');var h=t("#"+o.id+"_background");h.css({opacity:0,visibility:"hidden",backgroundColor:f.color,position:"fixed",top:0,right:0,bottom:0,left:0}),f.setzindex&&!f.autozindex&&h.css("z-index","100000"),f.transition&&h.css("transition",f.transition)}"overlay"==f.type&&(l.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),n={position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"},f.backgroundactive&&(n.position="relative",n.height="0",n.overflow="visible"),i.css(n),i.append('<div class="popup_align" />'),t(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),l.attr("role","dialog");var v=f.openelement?f.openelement:"."+o.id+"-open";t(v).each(function(e,o){t(o).attr("data-popup-ordinal",e),o.id||t(o).attr("id","open_"+parseInt(1e8*Math.random(),10))}),l.attr("aria-labelledby")||l.attr("aria-label")||l.attr("aria-labelledby",t(v).attr("id"));var g=f.closeelement?f.closeelement:"."+o.id+"-close";t(document).on("click",g,function(t){c.hide(o),t.preventDefault()}),"hover"==f.action?(f.keepfocus=!1,t(v).on("mouseenter",function(e){c.show(o,t(this).data("popup-ordinal"))}),t(v).on("mouseleave",function(t){c.hide(o)})):t(document).on("click",v,function(e){e.preventDefault();var i=t(this).data("popup-ordinal");setTimeout(function(){c.show(o,i)},0)}),f.detach?l.hide().detach():i.hide()},show:function(n,r){var f=t(n);if(!f.data("popup-visible")){f.data("popup-initialized")||c._init(n),f.attr("data-popup-initialized","true");var h=t("body"),v=f.data("popupoptions"),g=t("#"+n.id+"_wrapper"),b=t("#"+n.id+"_background");if(u(n,r,v.beforeopen),s[n.id]=r,setTimeout(function(){l.push(n.id)},0),v.autozindex){for(var m=document.getElementsByTagName("*"),y=m.length,k=0,_=0;_<y;_++){var w=t(m[_]).css("z-index");"auto"!==w&&k<(w=parseInt(w,10))&&(k=w)}a[n.id]=k,v.background&&a[n.id]>0&&t("#"+n.id+"_background").css({zIndex:a[n.id]+1}),a[n.id]>0&&g.css({zIndex:a[n.id]+2})}v.detach?(g.prepend(n),f.show()):g.show(),o=setTimeout(function(){g.css({visibility:"visible",opacity:1}),t("html").addClass("popup_visible").addClass("popup_visible_"+n.id),f.addClass("popup_content_visible")},20),v.scrolllock&&(h.css("overflow","hidden"),h.height()>i.height()&&h.css("margin-right",p+e)),v.backgroundactive&&f.css({top:(i.height()-(f.get(0).offsetHeight+parseInt(f.css("margin-top"),10)+parseInt(f.css("margin-bottom"),10)))/2+"px"}),f.css({visibility:"visible",opacity:1}),v.background&&(b.css({visibility:"visible",opacity:v.opacity}),setTimeout(function(){b.css({opacity:v.opacity})},0)),f.data("popup-visible",!0),c.reposition(n,r),f.data("focusedelementbeforepopup",document.activeElement),v.keepfocus&&(f.attr("tabindex",-1),setTimeout(function(){"closebutton"===v.focuselement?t("#"+n.id+" ."+n.id+"-close:first").focus():v.focuselement?t(v.focuselement).focus():f.focus()},v.focusdelay)),t(v.pagecontainer).attr("aria-hidden",!0),f.attr("aria-hidden",!1),u(n,r,v.onopen),d?g.one("transitionend",function(){u(n,r,v.opentransitionend)}):u(n,r,v.opentransitionend)}},hide:function(e){o&&clearTimeout(o);var i=t("body"),n=t(e),a=n.data("popupoptions"),r=t("#"+e.id+"_wrapper"),c=t("#"+e.id+"_background");n.data("popup-visible",!1),1===l.length?t("html").removeClass("popup_visible").removeClass("popup_visible_"+e.id):t("html").hasClass("popup_visible_"+e.id)&&t("html").removeClass("popup_visible_"+e.id),l.pop(),t("html").hasClass("popup_content_visible")&&n.removeClass("popup_content_visible"),a.keepfocus&&setTimeout(function(){t(n.data("focusedelementbeforepopup")).is(":visible")&&n.data("focusedelementbeforepopup").focus()},0),r.css({visibility:"hidden",opacity:0}),n.css({visibility:"hidden",opacity:0}),a.background&&c.css({visibility:"hidden",opacity:0}),t(a.pagecontainer).attr("aria-hidden",!1),n.attr("aria-hidden",!0),u(e,s[e.id],a.onclose),d&&"0s"!==n.css("transition-duration")?n.one("transitionend",function(t){n.data("popup-visible")||(a.detach?n.hide().detach():r.hide()),a.scrolllock&&setTimeout(function(){i.css({overflow:"visible","margin-right":p})},10),u(e,s[e.id],a.closetransitionend)}):(a.detach?n.hide().detach():r.hide(),a.scrolllock&&setTimeout(function(){i.css({overflow:"visible","margin-right":p})},10),u(e,s[e.id],a.closetransitionend))},toggle:function(e,o){t(e).data("popup-visible")?c.hide(e):setTimeout(function(){c.show(e,o)},0)},reposition:function(e,o){var n=t(e),a=n.data("popupoptions"),s=t("#"+e.id+"_wrapper");if(t("#"+e.id+"_background"),o=o||0,"tooltip"==a.type){var p;s.css({position:"absolute"});var l=(p=a.tooltipanchor?t(a.tooltipanchor):a.openelement?t(a.openelement).filter('[data-popup-ordinal="'+o+'"]'):t("."+e.id+'-open[data-popup-ordinal="'+o+'"]')).offset();"right"==a.horizontal?s.css("left",l.left+p.outerWidth()+a.offsetleft):"leftedge"==a.horizontal?s.css("left",l.left+p.outerWidth()-p.outerWidth()+a.offsetleft):"left"==a.horizontal?s.css("right",i.width()-l.left-a.offsetleft):"rightedge"==a.horizontal?s.css("right",i.width()-l.left-p.outerWidth()-a.offsetleft):s.css("left",l.left+p.outerWidth()/2-n.outerWidth()/2-parseFloat(n.css("marginLeft"))+a.offsetleft),"bottom"==a.vertical?s.css("top",l.top+p.outerHeight()+a.offsettop):"bottomedge"==a.vertical?s.css("top",l.top+p.outerHeight()-n.outerHeight()+a.offsettop):"top"==a.vertical?s.css("bottom",i.height()-l.top-a.offsettop):"topedge"==a.vertical?s.css("bottom",i.height()-l.top-n.outerHeight()-a.offsettop):s.css("top",l.top+p.outerHeight()/2-n.outerHeight()/2-parseFloat(n.css("marginTop"))+a.offsettop)}else"overlay"==a.type&&(a.horizontal?s.css("text-align",a.horizontal):s.css("text-align","center"),a.vertical?n.css("vertical-align",a.vertical):n.css("vertical-align","middle"))}},u=function(e,o,i){var a=n.openelement?n.openelement:"."+e.id+"-open",s=t(a+'[data-popup-ordinal="'+o+'"]');"function"==typeof i&&i.call(t(e),e,s)};t(document).on("keydown",function(e){if(l.length){var o=l[l.length-1],i=document.getElementById(o);t(i).data("popupoptions").escape&&27==e.keyCode&&t(i).data("popup-visible")&&c.hide(i)}}),t(document).on("click",function(e){if(l.length){var o=l[l.length-1],i=document.getElementById(o);t(i).data("popupoptions").blur&&!t(e.target).parents().andSelf().is("#"+o)&&t(i).data("popup-visible")&&2!==e.which&&(c.hide(i),"overlay"===t(i).data("popupoptions").type&&e.preventDefault())}}),t(document).on("focusin",function(e){if(l.length){var o=l[l.length-1],i=document.getElementById(o);t(i).data("popupoptions").keepfocus&&(i.contains(e.target)||(e.stopPropagation(),i.focus()))}}),t.fn.popup=function(e){return this.each(function(){if($el=t(this),"object"==typeof e){var o=t.extend({},t.fn.popup.defaults,e);$el.data("popupoptions",o),n=$el.data("popupoptions"),c._init(this)}else"string"==typeof e?($el.data("popupoptions")||($el.data("popupoptions",t.fn.popup.defaults),n=$el.data("popupoptions")),c[e].call(this,this)):($el.data("popupoptions")||($el.data("popupoptions",t.fn.popup.defaults),n=$el.data("popupoptions")),c._init(this))})},t.fn.popup.defaults={type:"overlay",autoopen:!1,background:!0,backgroundactive:!1,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,setzindex:!0,autozindex:!1,scrolllock:!1,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}(jQuery);