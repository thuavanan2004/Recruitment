!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(){return(t=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var a in n=arguments[e])Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);return t}).apply(this,arguments)};var n,e,o,a,i=function(t,n){return{name:t,value:void 0===n?-1:n,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},r=function(t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var e=new PerformanceObserver((function(t){return t.getEntries().map(n)}));return e.observe({type:t,buffered:!0}),e}}catch(t){}},s=function(t,n){var e=function e(o){"pagehide"!==o.type&&"hidden"!==document.visibilityState||(t(o),n&&(removeEventListener("visibilitychange",e,!0),removeEventListener("pagehide",e,!0)))};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},c=function(t){addEventListener("pageshow",(function(n){n.persisted&&t(n)}),!0)},d="function"==typeof WeakSet?new WeakSet:new Set,u=function(t,n,e){var o;return function(){n.value>=0&&(e||d.has(n)||"hidden"===document.visibilityState)&&(n.delta=n.value-(o||0),(n.delta||void 0===o)&&(o=n.value,t(n)))}},w=-1,p=function(){return"hidden"===document.visibilityState?0:1/0},m=function(){s((function(t){var n=t.timeStamp;w=n}),!0)},l=function(){return w<0&&(w=p(),m(),c((function(){setTimeout((function(){w=p(),m()}),0)}))),{get timeStamp(){return w}}},f={passive:!0,capture:!0},v=new Date,h=function(t,a){n||(n=a,e=t,o=new Date,b(removeEventListener),g())},g=function(){if(e>=0&&e<o-v){var t={entryType:"first-input",name:n.type,target:n.target,cancelable:n.cancelable,startTime:n.timeStamp,processingStart:n.timeStamp+e};a.forEach((function(n){n(t)})),a=[]}},y=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var e=function(){h(t,n),a()},o=function(){a()},a=function(){removeEventListener("pointerup",e,f),removeEventListener("pointercancel",o,f)};addEventListener("pointerup",e,f),addEventListener("pointercancel",o,f)}(n,t):h(n,t)}},b=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,y,f)}))},k=function(t){var n,e=i("TTFB");n=function(){try{var n=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,n={entryType:"navigation",startTime:0};for(var e in t)"navigationStart"!==e&&"toJSON"!==e&&(n[e]=Math.max(t[e]-t.navigationStart,0));return n}();e.value=e.delta=n.responseStart,e.entries=[n],t(e)}catch(t){}},"complete"===document.readyState?setTimeout(n,0):addEventListener("pageshow",n)};const S=t=>window.woorankAssistantOptions.debug&&console.log(t);var A=function(o){var w=o.document,p=o.userAgent,m=o.navigator,f=o.useLambda,v=o.pubKey,h=o.woorankRootUrl,y=[],A=f?"https://fm0bfi5nrl.execute-api.us-east-1.amazonaws.com/prod/collect/"+v:new URL("/rum-collector/",h).toString(),O=function(n){var e;n.entries;var o=function(t,n){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(e[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(t);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(e[o[a]]=t[o[a]])}return e}(n,["entries"]),a=t(t({},o),{url:w.location.href,date:(new Date).toISOString(),userAgent:p,siteOwnerId:v,connectionType:null===(e=m.connection||m.mozConnection||m.webkitConnection)||void 0===e?void 0:e.effectiveType});S({event:"onReport",woorankReportData:a}),y.push(a)};!function(t,n){var e,o=i("CLS",0),a=function(t){t.hadRecentInput||(o.value+=t.value,o.entries.push(t),e())},d=r("layout-shift",a);d&&(e=u(t,o,n),s((function(){d.takeRecords().map(a),e()})),c((function(){o=i("CLS",0),e=u(t,o,n)})))}(O),function(t,o){var w,p=l(),m=i("FID"),f=function(t){t.startTime<p.timeStamp&&(m.value=t.processingStart-t.startTime,m.entries.push(t),d.add(m),w())},v=r("first-input",f);w=u(t,m,o),v&&s((function(){v.takeRecords().map(f),v.disconnect()}),!0),v&&c((function(){var r;m=i("FID"),w=u(t,m,o),a=[],e=-1,n=null,b(addEventListener),r=f,a.push(r),g()}))}(O),function(t,n){var e,o=l(),a=i("LCP"),w=function(t){var n=t.startTime;n<o.timeStamp&&(a.value=n,a.entries.push(t)),e()},p=r("largest-contentful-paint",w);if(p){e=u(t,a,n);var m=function(){d.has(a)||(p.takeRecords().map(w),p.disconnect(),d.add(a),e())};["keydown","click"].forEach((function(t){addEventListener(t,m,{once:!0,capture:!0})})),s(m,!0),c((function(o){a=i("LCP"),e=u(t,a,n),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-o.timeStamp,d.add(a),e()}))}))}))}}(O),function(t,n){var e,o=l(),a=i("FCP"),s=r("paint",(function(t){"first-contentful-paint"===t.name&&(s&&s.disconnect(),t.startTime<o.timeStamp&&(a.value=t.startTime,a.entries.push(t),d.add(a),e()))}));s&&(e=u(t,a,n),c((function(o){a=i("FCP"),e=u(t,a,n),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-o.timeStamp,d.add(a),e()}))}))})))}(O),k(O),w.addEventListener("visibilitychange",(function(){"hidden"===w.visibilityState&&0!==y.length&&(S({event:"flushing-web-vitals",events:y}),m.sendBeacon&&m.sendBeacon(A,JSON.stringify(y)),y=[])}))};try{const t=()=>{if(document.hasStorageAccess&&"1"===new URL(window.location.href).searchParams.get("init-assistant")){window.addEventListener("message",(t=>{const n=new URL(t.origin).host;"storage-access-granted"===t.data&&["www.woorank.com","woorank.com","assistant.woorank.com"].includes(n)&&window.location.reload()}),!1);const t=document.createElement("iframe");t.src="https://assistant.woorank.com/hydra/assistant-storage.html",t.style="position: abolute; top: 0; left: 0; width: 100px; height: 100px; border: none; position:absolute;z-index:2147483647",document.body.appendChild(t)}},n=()=>{if(!window.navigator||!window.navigator.userAgent)return!0;const t=window.navigator.userAgent;return["spider","crawl","bingPreview","iphone","android","HeadlessChrome","bot"].some((n=>t.toLowerCase().includes(n.toLowerCase())))},e=()=>{if(window.woorankAssistantOptions)return window.woorankAssistantOptions;if(document.currentScript&&document.currentScript.src){const t=new URL(document.currentScript.src).searchParams;return 0===t.toString().length?{}:{url:t.get("url"),assistantPublicKey:t.get("assistantPublicKey"),collectWebVitals:!!t.get("collectWebVitals")}}return{}},o=()=>!window.woorankAssistantOptions.bypassIframe&&window.self!==window.top,a=()=>{if(!window.woorankAssistantOptions.url)return!0;const t=new URL(window.location).host.replace(/^www\./,"").toLowerCase();if("function"==typeof t.endsWith&&t.endsWith("duda.co"))return!0;return t===window.woorankAssistantOptions.url.replace(/^www\./,"").toLowerCase()};(async()=>{if(window.woorankAssistantOptions=e(),!a())return;const i=window.woorankAssistantOptions.root||"https://www.woorank.com/",r=window.woorankAssistantOptions.useLambda||!1,s=["https://www.woorank.com/","https://wwwtest.woorank.com/"].includes(i)?"https://assets.woorank.com/hydra/":i+"dev-cdn/",c=window.woorankAssistantOptions.assistantPublicKey||"na";if(A({woorankRootUrl:i,document:document,pubKey:c,useLambda:r,navigator:navigator,userAgent:window.navigator.userAgent}),o()||n())return;const d=new URL(i+"en/onpage-assistant/check");d.searchParams.append("url",window.location.href),d.searchParams.append("projectUrl",window.woorankAssistantOptions.url),window.woorankAssistantOptions.assistantPublicKey&&d.searchParams.append("pubkey",window.woorankAssistantOptions.assistantPublicKey),window.woorankAssistantOptions.context&&"string"==typeof window.woorankAssistantOptions.context&&d.searchParams.append("context",window.woorankAssistantOptions.context),window.dmAPI&&window.dmAPI.getCurrentEnvironment&&"editor"===window.dmAPI.getCurrentEnvironment()&&d.searchParams.append("currentEnvironment","editor"),window.dmAPI&&window.dmAPI.getSiteName&&window.dmAPI.getSiteName()&&d.searchParams.append("siteName",window.dmAPI.getSiteName()),"loading"===document.readyState?window.addEventListener("load",(()=>{t()})):t();const u=await window.fetch(d,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(404!==u.status)try{const t=await u.json();t.success?(window.woorankAssistantOptions.daysInTrial=t.daysInTrial,window.woorankAssistantOptions.isInTrial=t.isInTrial,window.woorankAssistantOptions.trialEnded=t.trialEnded,document.body.appendChild(document.createElement("script")).src=`${s}assistantWidget.latest.js`):t.userNotFound&&"dudaEditor"===window.woorankAssistantOptions.context&&(window.woorankAssistantOptions.userNotFound=!0,document.body.appendChild(document.createElement("script")).src=`${s}assistantWidget.latest.js`)}catch(t){console.error("error trying to load woorank assistant user data")}})()}catch(t){console.error("Error loading woorank assistant")}}();
//# sourceMappingURL=assistantLoader.latest.js.map
